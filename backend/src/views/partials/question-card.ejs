<%# 
  Question Card Partial
  Expects: question object with id, title, body, voteScore, answerCount, viewCount, status, tags, authorName, createdAt, acceptedAnswerId
%>
<article class="flex flex-col sm:flex-row gap-4 p-4 rounded-lg bg-white dark:bg-[#151a21] border border-gray-200 dark:border-[#282f39] hover:border-gray-300 dark:hover:border-gray-600 transition-colors cursor-pointer group">
    <!-- Metrics -->
    <div class="flex sm:flex-col items-center sm:items-end gap-4 sm:gap-2 sm:min-w-[60px] text-xs sm:text-sm pt-1">
        <div class="text-center sm:text-right">
            <span class="font-bold text-slate-900 dark:text-white block sm:inline"><%= question.voteScore %></span>
            <span class="text-gray-500 dark:text-gray-400">votes</span>
        </div>
        <div class="text-center sm:text-right px-2 py-0.5 rounded <%= question.acceptedAnswerId ? 'bg-green-900/30 border border-green-800 text-green-400' : 'text-gray-500 dark:text-gray-400' %>">
            <span class="font-bold block sm:inline"><%= question.answerCount %></span>
            <span>ans</span>
        </div>
        <div class="text-center sm:text-right text-gray-500 dark:text-gray-500 text-xs hidden sm:block">
            <span class="block sm:inline"><%= question.viewCount %></span> views
        </div>
    </div>
    
    <!-- Content -->
    <div class="flex flex-col gap-2 flex-1 min-w-0">
        <div class="flex items-start justify-between gap-2">
            <a class="text-base sm:text-lg font-semibold text-primary group-hover:text-blue-400 transition-colors leading-tight line-clamp-2" href="/questions/<%= question.id %>">
                <%= question.title %>
            </a>
            <% if (question.status === 'solved' || question.acceptedAnswerId) { %>
            <span class="shrink-0 flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-900/40 text-green-400 text-xs font-medium border border-green-800/50">
                <span class="material-symbols-outlined text-[14px]">check_circle</span>
                Solved
            </span>
            <% } else if (question.status === 'open') { %>
            <span class="shrink-0 flex items-center gap-1 px-2 py-0.5 rounded-full bg-amber-900/40 text-amber-400 text-xs font-medium border border-amber-800/50">
                <span class="material-symbols-outlined text-[14px]">error</span>
                Open
            </span>
            <% } else if (question.status === 'in_review') { %>
            <span class="shrink-0 flex items-center gap-1 px-2 py-0.5 rounded-full bg-blue-900/40 text-blue-400 text-xs font-medium border border-blue-800/50">
                <span class="material-symbols-outlined text-[14px]">pending</span>
                In Review
            </span>
            <% } %>
        </div>
        
        <p class="text-sm text-gray-600 dark:text-gray-400 line-clamp-2 font-display">
            <%= question.body.substring(0, 200).replace(/[#*`]/g, '') %><%= question.body.length > 200 ? '...' : '' %>
        </p>
        
        <!-- Metadata -->
        <div class="flex flex-wrap items-center justify-between gap-y-2 mt-1">
            <div class="flex flex-wrap items-center gap-2">
                <% if (question.tags && question.tags.length > 0) { %>
                    <% question.tags.slice(0, 4).forEach(function(tag) { %>
                    <a href="/questions?tagId=<%= tag.id %>" class="px-2 py-1 rounded-md bg-gray-100 dark:bg-[#282f39] text-primary text-xs font-medium hover:bg-primary/20 transition-colors"><%= tag.name %></a>
                    <% }); %>
                <% } %>
            </div>
            <div class="flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400">
                <div class="size-5 rounded-full bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center text-white text-[10px] font-bold">
                    <%= question.authorName ? question.authorName.charAt(0).toUpperCase() : 'A' %>
                </div>
                <span class="font-medium text-slate-700 dark:text-blue-300"><%= question.authorName || 'Anonymous' %></span>
                <span>â€¢</span>
                <span>asked <%= formatTimeAgo(question.createdAt) %></span>
            </div>
        </div>
    </div>
</article>
